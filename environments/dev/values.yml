# -----------------------------------------------------------------------
# Dev environment configuration
# This YAML file is the single source of truth for all dev environment
# settings. 
# -----------------------------------------------------------------------
environment: dev

gcp:
  project_id: project-ec2467ed-84cd-4898-b5b     # Replace with your GCP project ID
  region: us-central1                          

state:
  bucket: hippo-cloud-tf-state-dev     # GCS bucket for remote state
  prefix: state/dev                    # State file path prefix within bucket

cluster:
  name: hippo-dev-cluster
  location: us-central1-a              # Zone = zonal cluster; region = regional cluster (HA)
  release_channel: REGULAR
  deletion_protection: false           # Allow destroy in dev
  enable_private_nodes: true
  enable_private_endpoint: false       # Allow kubectl from workstations
  master_ipv4_cidr_block: "172.16.0.0/28" # (2^4) - 16 IPs

  # Who can reach the control plane
  master_authorized_networks:
    - cidr_block: "0.0.0.0/0"
      display_name: "allow-all-dev"

  # Node pool definitions
  node_pools:
    default-pool:
      machine_type: e2-standard-2
      min_node_count: 2
      max_node_count: 4
      disk_size_gb: 20
      disk_type: pd-standard
      image_type: COS_CONTAINERD
      spot: true                       # Use spot instances in dev
      preemptible: false
      # Dedicated node SA with least-privilege roles (created by module.iam).
      # Avoids using the default Compute SA which has overly broad access.
      # Requires node pool recreation if changed after initial cluster creation.
      service_account: "hippo-dev-cluster-nodes@project-ec2467ed-84cd-4898-b5b.iam.gserviceaccount.com"
      labels:
        pool: default
      tags:
        - gke-node
        - hippo-dev

networking:
  network_name: hippo-dev-vpc
  subnet_name: hippo-dev-subnet
  subnet_cidr: "10.10.0.0/22" # 1,024 IPs
  pods_cidr: "10.20.0.0/18"  # 16,382 IPs
  services_cidr: "10.30.0.0/20" # 4,096 IPs

tags:
  git-repository: hippo_cloud
  team: platform
  cost-center: engineering
